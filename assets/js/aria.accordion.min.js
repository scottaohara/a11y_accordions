!function(t,s){"use strict";var u={};(t.ARIAaccordion=u).NS="ARIAaccordion",u.AUTHOR="Scott O'Hara",u.VERSION="3.2.1",u.LICENSE="https://github.com/scottaohara/accessible_accordions/blob/master/LICENSE";var g="accordion",A=g+"__trigger",h=g+"__panel",b="[data-aria-accordion-heading]",f="[data-aria-accordion-panel]",y=0;u.create=function(){var t,e,a,r,i,l,n="none",o=s.querySelectorAll("[data-aria-accordion]");for(y+=1,l=0;l<o.length;l++){var d;if((t=o[l]).hasAttribute("id")||(t.id="acc_"+y+"-"+l),t.classList.add(g),a=s.querySelectorAll("#"+t.id+"> li").length?(e=s.querySelectorAll("#"+t.id+" li > "+f),s.querySelectorAll("#"+t.id+" li > "+b)):(e=s.querySelectorAll("#"+t.id+" > "+f),s.querySelectorAll("#"+t.id+" > "+b)),t.hasAttribute("data-default")&&(n=t.getAttribute("data-default")),i=t.hasAttribute("data-constant"),t.hasAttribute("data-multi"),t.hasAttribute("data-transition")){var c=t.querySelectorAll(f);for(d=0;d<c.length;d++)c[d].classList.add(h+"--transition")}for(u.setupPanels(t.id,e,n,i),u.setupHeadingButton(a,i),r=s.querySelectorAll("#"+t.id+"> li").length?s.querySelectorAll("#"+t.id+" li > "+b+" ."+A):s.querySelectorAll("#"+t.id+" > "+b+" ."+A),d=0;d<r.length;d++)r[d].addEventListener("click",u.actions),r[d].addEventListener("keydown",u.keytrolls)}},u.setupPanels=function(t,e,a,r){var i,l,n,o,d;for(i=0;i<e.length;i++)n=t+"_panel_"+(i+1),o=a,d=r,(l=e[i]).setAttribute("id",n),c(e[0],!0),l.classList.add(h),"none"!==o&&NaN!==parseInt(o)&&(o<=1?c(e[0],!1):o-1>=e.length?c(e[e.length-1],!1):c(e[o-1],!1)),(d&&"none"===o||NaN===parseInt(o))&&c(e[0],!1)},u.setupHeadingButton=function(t,e){var a,r,i,l,n,o;for(o=0;o<t.length;o++)for(r=(a=t[o]).nextElementSibling.id,i=s.getElementById(r).getAttribute("aria-hidden"),l=s.createElement("button"),n=a.cloneNode(!0),a.innerHTML="",a.classList.add("accordion__heading"),l.setAttribute("type","button"),l.setAttribute("aria-controls",r),l.setAttribute("id",r+"_trigger"),l.classList.add(A),"false"===i?(d(l,!0),p(l,!0),e&&l.setAttribute("aria-disabled","true")):(d(l,!1),p(l,!1)),a.appendChild(l);0<n.childNodes.length;)l.appendChild(n.childNodes[0])},u.actions=function(t){var e,a=this.id.replace(/_panel.*$/g,""),r=s.getElementById(this.getAttribute("aria-controls"));e=s.querySelectorAll("#"+a+"> li").length?s.querySelectorAll("#"+a+" li > "+b+" ."+A):s.querySelectorAll("#"+a+" > "+b+" ."+A),t.preventDefault(),u.togglePanel(t,a,r,e)},u.togglePanel=function(t,e,a,r){var i,l,n=t.target;if("BUTTON"!=t.target.nodeName&&(n=t.target.parentElement),"true"!==n.getAttribute("aria-disabled")&&(i=n.getAttribute("aria-controls"),p(n,"true"),"true"===n.getAttribute("aria-expanded")?(d(n,"false"),c(a,"true")):(d(n,"true"),c(a,"false"),s.getElementById(e).hasAttribute("data-constant")&&o(n,"true")),s.getElementById(e).hasAttribute("data-constant")||!s.getElementById(e).hasAttribute("data-multi")))for(l=0;l<r.length;l++)n!==r[l]&&(p(r[l],"false"),i=r[l].getAttribute("aria-controls"),o(r[l],"false"),d(r[l],"false"),c(s.getElementById(i),"true"))},u.keytrolls=function(t){if(t.target.classList.contains(A)){var e,a=t.keyCode||t.which,r=this.id.replace(/_panel.*$/g,"");switch(e=s.querySelectorAll("#"+r+"> li").length?s.querySelectorAll("#"+r+" li > "+b+" ."+A):s.querySelectorAll("#"+r+" > "+b+" ."+A),a){case 35:t.preventDefault(),e[e.length-1].focus();break;case 36:t.preventDefault(),e[0].focus()}}},u.init=function(){u.create()};var c=function(t,e){t.setAttribute("aria-hidden",e)},d=function(t,e){t.setAttribute("aria-expanded",e)},o=function(t,e){t.setAttribute("aria-disabled",e)},p=function(t,e){t.setAttribute("data-current",e)};u.init()}(window,document);
